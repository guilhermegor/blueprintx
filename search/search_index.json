{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>Lightweight scaffolding tool (Make + bash) for creating ready-to-code projects. It is language-agnostic by design.</p> <p>\ud83d\udce6 GitHub Repository: github.com/guilhermegor/blueprintx</p>"},{"location":"#get-started","title":"\ud83d\ude80 Get Started","text":"<p>New to BlueprintX? See the Get Started guide for installation and quick start instructions.</p>"},{"location":"#python-scaffolds","title":"Python scaffolds","text":"<ul> <li>DDD Service: Domain-Driven Design, hexagonal service skeleton with per-feature modules and shared infrastructure. See DDD Service.</li> <li>Lib Minimal: lean library starter with packaging, tests, and CI ready. See Lib Minimal.</li> </ul>"},{"location":"#view-these-docs-locally-poetry","title":"View these docs locally (Poetry)","text":"<p>Option A (direct) 1. Install docs deps: <code>poetry install --with docs</code> 2. Serve with live reload: <code>poetry run mkdocs serve -a 0.0.0.0:8000 --livereload</code> 3. Build static site: <code>poetry run mkdocs build</code></p> <p>Option B (Make recipes) 1. <code>make mkdocs-serve</code> (installs docs deps, serves with live reload) 2. <code>make mkdocs-build</code> (builds static site)</p>"},{"location":"#scaffolder-quick-reference","title":"Scaffolder quick reference","text":"<ul> <li>Interactive menu: <code>make init</code></li> <li>Preview structures: <code>make preview</code></li> <li>Temp sandbox: <code>make dev</code> or <code>make dev-clean</code></li> <li>Structure-only preview: <code>make dry-run</code></li> </ul> <p>Each scaffold copies shared Python assets from <code>templates/python-common</code> (pyproject, pre-commit, VS Code, CI, README boilerplate) and then applies its template-specific layout.</p>"},{"location":"ddd-service/","title":"DDD Service (Domain-Driven Design, hexagonal service)","text":"<p>A Domain-Driven Design scaffold with a hexagonal (ports-and-adapters) layout. It keeps business logic isolated from I/O while allowing shared infrastructure when it is truly cross-cutting.</p> <p>Examples: External API Calls \u00b7 Wiring with FastAPI \u00b7 Bank Balance Alert</p>"},{"location":"ddd-service/#expected-layout-after-scaffold","title":"Expected layout (after scaffold)","text":"<pre><code>project/\n  src/\n    core/{domain,infrastructure,application}\n    modules/&lt;feature&gt;/{domain,application,infrastructure}\n    utils/\n    config/\n    main.py\n  tests/{unit,integration,performance}/\n  container/\n    scripts/\n  assets/\n  data/\n  docs/\n  .github/workflows/\n  .vscode/\n  .env\n  pyproject.toml\n</code></pre>"},{"location":"ddd-service/#folder-descriptions","title":"Folder Descriptions","text":"Folder Purpose Expected Content <code>src/</code> Main source code All Python modules, organized by DDD layers <code>src/core/</code> Shared cross-cutting code Domain entities, infrastructure adapters, and application services used across multiple features <code>src/core/domain/</code> Shared domain layer Base entities, value objects, shared domain services <code>src/core/application/</code> Shared application layer Factories, shared use-cases, cross-cutting orchestration <code>src/core/infrastructure/</code> Shared infrastructure Database handlers, HTTP clients, message brokers, external integrations <code>src/modules/&lt;feature&gt;/</code> Feature-specific code Bounded context with its own domain, application, and infrastructure layers <code>src/utils/</code> Utility functions Helpers, formatters, validators, decorators <code>src/config/</code> Configuration Settings, environment loaders, constants <code>tests/unit/</code> Unit tests Fast, isolated tests for domain logic and use-cases <code>tests/integration/</code> Integration tests Tests with real databases, APIs, or external services <code>tests/performance/</code> Performance tests Load tests, benchmarks, stress tests <code>container/</code> Container configuration Dockerfile, docker-compose.yaml, container scripts <code>container/scripts/</code> Container scripts Entrypoint scripts, health checks, init scripts <code>assets/</code> Static resources Images, icons, fonts, static files <code>data/</code> Data storage SQLite databases, CSV files, XLSX files, JSON data, seed data <code>docs/</code> Documentation API docs, architecture diagrams, user guides <code>.github/workflows/</code> CI/CD pipelines GitHub Actions workflows for tests, linting, deployment <code>.vscode/</code> Editor settings VS Code workspace settings, extensions, launch configs"},{"location":"ddd-service/#layers","title":"Layers","text":""},{"location":"ddd-service/#domain-coredomain-or-modulesfeaturedomain","title":"Domain (<code>core/domain</code> or <code>modules/&lt;feature&gt;/domain</code>)","text":"<p>What goes here: Entities, value objects, domain services (pure business logic), and the ports (interfaces) the domain needs. No framework or I/O.</p> <pre><code># entities.py\nfrom dataclasses import dataclass\nfrom datetime import datetime\n\n@dataclass\nclass Note:\n    id: str\n    title: str\n    created_at: datetime\n</code></pre> <pre><code># ports.py\nfrom abc import ABC, abstractmethod\nfrom typing import Iterable\nfrom .entities import Note\n\nclass NoteRepository(ABC):\n    @abstractmethod\n    def add(self, note: Note) -&gt; Note: ...\n    @abstractmethod\n    def get(self, note_id: str) -&gt; Note | None: ...\n    @abstractmethod\n    def list(self) -&gt; Iterable[Note]: ...\n</code></pre>"},{"location":"ddd-service/#application-coreapplication-or-modulesfeatureapplication","title":"Application (<code>core/application</code> or <code>modules/&lt;feature&gt;/application</code>)","text":"<p>What goes here: Use-case orchestration; coordinates domain objects and ports. Enforces transaction boundaries and policies; still framework-free.</p> <pre><code># use_cases.py\nfrom datetime import datetime\nimport uuid\nfrom ..domain.entities import Note\nfrom ..domain.ports import NoteRepository\n\nclass CreateNote:\n    def __init__(self, repo: NoteRepository):\n        self.repo = repo\n\n    def execute(self, title: str) -&gt; Note:\n        note = Note(id=uuid.uuid4().hex, title=title, created_at=datetime.utcnow())\n        return self.repo.add(note)\n</code></pre>"},{"location":"ddd-service/#infrastructure-coreinfrastructure-or-modulesfeatureinfrastructure","title":"Infrastructure (<code>core/infrastructure</code> or <code>modules/&lt;feature&gt;/infrastructure</code>)","text":"<p>What goes here: Adapters implementing ports (DB, HTTP clients, brokers), configuration glue, persistence mappers. Keep side effects here.</p> <pre><code># repositories.py\nfrom ..domain.entities import Note\nfrom ..domain.ports import NoteRepository\n\nclass InMemoryNoteRepository(NoteRepository):\n    def __init__(self):\n        self._items: dict[str, Note] = {}\n\n    def add(self, note: Note) -&gt; Note:\n        self._items[note.id] = note\n        return note\n</code></pre> <p>Shared database backends live under <code>core/infrastructure/database/</code>, with runtime selection via <code>DB_BACKEND</code> env var (json, csv, sqlite, postgresql, mariadb, mysql, mssql, oracle).</p>"},{"location":"ddd-service/#modules-modulesfeature","title":"Modules (<code>modules/&lt;feature&gt;</code>)","text":"<p>What goes here: Feature/bounded-context composition \u2014 wire domain + app + infra for that feature. Also entrypoints like API/CLI handlers.</p>"},{"location":"ddd-service/#rules-of-thumb","title":"Rules of thumb","text":"Layer Responsibility Domain Pure logic and contracts; no I/O or frameworks Application Orchestrate use-cases, transactions, and policies; still framework-free Infrastructure All I/O adapters implementing ports (DB, HTTP, queues, files) Modules Group everything per feature/context and provide entrypoints/wiring <p>Keep <code>core/</code> only for truly shared cross-cutting pieces.</p>"},{"location":"ddd-service/#learn-more","title":"Learn more","text":"<ul> <li>Example - External API Calls \u2014 Stock exchange data, swapping providers</li> <li>Example - Wiring with FastAPI \u2014 Wiring, FastAPI integration, testing</li> <li>Example - Bank Balance Alert \u2014 Complete multi-port example</li> </ul>"},{"location":"ddd-service/#acknowledgments","title":"\ud83d\udcda Acknowledgments","text":"<p>This skeleton is inspired by the foundational work of Eric Evans in his seminal book Domain-Driven Design: Tackling Complexity in the Heart of Software. If you're new to DDD or want to deepen your understanding of the patterns used here, we highly recommend reading it.</p> <p>\ud83d\udcd6 Domain-Driven Design: Tackling Complexity in the Heart of Software \u2014 Eric Evans</p>"},{"location":"get-started/","title":"\ud83d\ude80 Get Started","text":""},{"location":"get-started/#1-clone-the-repository","title":"1. Clone the repository","text":"<pre><code>git clone https://github.com/guilhermegor/blueprintx.git\ncd blueprintx\n</code></pre>"},{"location":"get-started/#2-run-the-interactive-scaffolder","title":"2. Run the interactive scaffolder","text":"<pre><code>make init        # interactive scaffolder\nmake preview     # show skeleton structures\nmake dev         # scaffold into a temp dir (kept)\nmake dev-clean   # scaffold into temp dir and auto-delete on exit\nmake dry-run     # print structure; no files written\n</code></pre>"},{"location":"get-started/#requirements","title":"Requirements","text":"<ul> <li><code>bash</code> \u2265 4</li> <li>For Python skeletons: <code>pyenv</code>/<code>poetry</code> (or your Python toolchain of choice) in the generated project</li> </ul>"},{"location":"get-started/#highlights","title":"\u2728 Highlights","text":"<ul> <li>Interactive CLI (<code>make init</code>) with skeleton choice</li> <li>Ready-made skeletons (currently Python): DDD service (hexagonal/ports-and-adapters) and lib-minimal</li> <li>Common Python baseline: templated <code>pyproject.toml</code>, pre-commit, VS Code settings, CI workflow, CODEOWNERS, PR template, and test folders</li> <li>Dev/preview modes: temp scaffolds, dry-run structure previews, optional auto-clean</li> </ul> <p>\ud83d\udce6 GitHub Repository: github.com/guilhermegor/blueprintx</p>"},{"location":"lib-minimal/","title":"Lib Minimal (library starter)","text":"<p>A lean Python library skeleton with packaging, testing, CI, and editor settings ready to go.</p>"},{"location":"lib-minimal/#expected-layout-after-scaffold","title":"Expected layout (after scaffold)","text":"<p><pre><code>project/\n  src/&lt;project_name&gt;/\n    __init__.py\n    main.py\n  tests/\n    unit/test_main.py\n    integration/\n    performance/\n  assets/\n  data/\n  docs/\n  container/\n  scripts/\n  .github/workflows/tests.yaml\n  .vscode/settings.json\n  .env\n  pyproject.toml\n  README.md\n</code></pre> Shared Python assets (pyproject, pre-commit, README boilerplate, VS Code, CI) come from <code>templates/python-common</code>.</p>"},{"location":"lib-minimal/#folder-descriptions","title":"Folder Descriptions","text":"Folder Purpose Expected Content <code>src/&lt;project_name&gt;/</code> Library source code Python modules, classes, functions \u2014 your library's public API <code>tests/unit/</code> Unit tests Fast, isolated tests for individual functions and classes <code>tests/integration/</code> Integration tests Tests with external dependencies (databases, APIs, file systems) <code>tests/performance/</code> Performance tests Benchmarks, load tests, memory profiling <code>assets/</code> Static resources Images, icons, fonts, static files bundled with the library <code>data/</code> Data storage SQLite databases, CSV files, XLSX files, JSON data, fixtures, seed data <code>docs/</code> Documentation API reference, tutorials, user guides (starter <code>index.md</code> created) <code>container/</code> Container configuration Dockerfile, docker-compose.yaml for containerized environments <code>scripts/</code> Utility scripts Build scripts, automation, CLI helpers <code>.github/workflows/</code> CI/CD pipelines GitHub Actions for tests, linting, publishing to PyPI <code>.vscode/</code> Editor settings VS Code workspace settings, recommended extensions, debug configs"},{"location":"lib-minimal/#starting-points","title":"Starting points","text":"<p>Sample entrypoint: templates/lib-minimal/main.py <pre><code>def main():\n    print(\"Hello from lib-minimal!\")\n</code></pre> The generated <code>tests/unit/test_main.py</code> asserts that this output appears.</p>"},{"location":"lib-minimal/#typical-workflow","title":"Typical workflow","text":"<ol> <li>Add library functions/classes under <code>src/&lt;project_name&gt;/</code>.</li> <li>Add or expand tests in <code>tests/unit/</code> (and integration/performance as needed).</li> <li>Run tests with Poetry: <code>poetry run pytest</code>.</li> <li>Keep the docs (<code>docs/</code>) in sync with assets APIs; you can host them with mkdocs like the BlueprintX docs.</li> </ol>"},{"location":"lib-minimal/#example-feature-addition","title":"Example feature addition","text":"<p><pre><code># src/&lt;project_name&gt;/math_utils.py\ndef add(a: int, b: int) -&gt; int:\n    return a + b\n</code></pre> <pre><code># tests/unit/test_math_utils.py\nfrom &lt;project_name&gt;.math_utils import add\n\ndef test_add():\n    assert add(2, 3) == 5\n</code></pre></p>"},{"location":"examples/ddd-bank-balance-alert/","title":"DDD Service \u2014 Bank Balance Alert Example","text":"<p>A complete illustrative example showing how to structure a banking feature with balance alerts using DDD hexagonal architecture.</p> <p>See also: Core concepts \u00b7 Usage examples \u00b7 External API calls</p>"},{"location":"examples/ddd-bank-balance-alert/#overview","title":"Overview","text":"<p>This example demonstrates: - Multiple ports (repository + notification) - Domain entities with business meaning - Use-case orchestrating multiple collaborators - Infrastructure adapters for persistence and notifications</p> <p>Not scaffolded \u2014 illustrative only.</p>"},{"location":"examples/ddd-bank-balance-alert/#domain-layer","title":"Domain Layer","text":""},{"location":"examples/ddd-bank-balance-alert/#entities","title":"Entities","text":"<p><code>modules/banking/domain/entities.py</code> <pre><code>from dataclasses import dataclass\nfrom datetime import datetime\n\n\n@dataclass\nclass Account:\n    id: str\n    owner_email: str\n    balance: float\n    updated_at: datetime\n</code></pre></p>"},{"location":"examples/ddd-bank-balance-alert/#ports","title":"Ports","text":"<p><code>modules/banking/domain/ports.py</code> <pre><code>from typing import Protocol\nfrom .entities import Account\n\n\nclass AccountRepository(Protocol):\n    \"\"\"Port for account persistence.\"\"\"\n\n    def get(self, account_id: str) -&gt; Account | None:\n        \"\"\"Retrieve an account by ID.\"\"\"\n        ...\n\n    def save(self, account: Account) -&gt; None:\n        \"\"\"Persist an account.\"\"\"\n        ...\n\n\nclass NotificationPort(Protocol):\n    \"\"\"Port for sending notifications.\"\"\"\n\n    def send_balance_alert(\n        self,\n        to_email: str,\n        current_balance: float,\n        threshold: float,\n    ) -&gt; None:\n        \"\"\"Send a low-balance alert to the account owner.\"\"\"\n        ...\n</code></pre></p>"},{"location":"examples/ddd-bank-balance-alert/#application-layer","title":"Application Layer","text":"<p><code>modules/banking/application/balance_alert.py</code> <pre><code>from ..domain.entities import Account\nfrom ..domain.ports import AccountRepository, NotificationPort\n\n\nclass BalanceAlertService:\n    \"\"\"Use-case: check account balance and send alert if below threshold.\"\"\"\n\n    def __init__(self, accounts: AccountRepository, notifier: NotificationPort):\n        self.accounts = accounts\n        self.notifier = notifier\n\n    def execute(self, account_id: str, threshold: float) -&gt; bool:\n        \"\"\"\n        Check if account balance is below threshold and send alert.\n\n        Returns:\n            True if alert was sent, False otherwise.\n        \"\"\"\n        account = self.accounts.get(account_id)\n        if account is None:\n            return False\n\n        if account.balance &lt; threshold:\n            self.notifier.send_balance_alert(\n                to_email=account.owner_email,\n                current_balance=account.balance,\n                threshold=threshold,\n            )\n            return True\n\n        return False\n</code></pre></p>"},{"location":"examples/ddd-bank-balance-alert/#infrastructure-layer","title":"Infrastructure Layer","text":""},{"location":"examples/ddd-bank-balance-alert/#repository-adapter","title":"Repository Adapter","text":"<p><code>modules/banking/infrastructure/repositories.py</code> <pre><code>from ..domain.entities import Account\nfrom ..domain.ports import AccountRepository\n\n\nclass InMemoryAccountRepository(AccountRepository):\n    \"\"\"In-memory implementation for testing and demos.\"\"\"\n\n    def __init__(self):\n        self.items: dict[str, Account] = {}\n\n    def get(self, account_id: str) -&gt; Account | None:\n        return self.items.get(account_id)\n\n    def save(self, account: Account) -&gt; None:\n        self.items[account.id] = account\n</code></pre></p>"},{"location":"examples/ddd-bank-balance-alert/#notification-adapter","title":"Notification Adapter","text":"<p><code>modules/banking/infrastructure/notifications.py</code> <pre><code>from ..domain.ports import NotificationPort\n\n\nclass EmailNotificationAdapter(NotificationPort):\n    \"\"\"Email notification adapter (console output for demo).\"\"\"\n\n    def send_balance_alert(\n        self,\n        to_email: str,\n        current_balance: float,\n        threshold: float,\n    ) -&gt; None:\n        print(\n            f\"\ud83d\udce7 Email -&gt; {to_email}: \"\n            f\"Your balance (${current_balance:.2f}) is below ${threshold:.2f}\"\n        )\n\n\nclass SlackNotificationAdapter(NotificationPort):\n    \"\"\"Alternative: Slack notification adapter.\"\"\"\n\n    def __init__(self, webhook_url: str):\n        self.webhook_url = webhook_url\n\n    def send_balance_alert(\n        self,\n        to_email: str,\n        current_balance: float,\n        threshold: float,\n    ) -&gt; None:\n        import requests\n        requests.post(self.webhook_url, json={\n            \"text\": f\"\u26a0\ufe0f Low balance alert for {to_email}: ${current_balance:.2f} &lt; ${threshold:.2f}\"\n        })\n</code></pre></p>"},{"location":"examples/ddd-bank-balance-alert/#wiring-running","title":"Wiring &amp; Running","text":"<p><code>modules/banking/main.py</code> <pre><code>from datetime import datetime\nfrom .application.balance_alert import BalanceAlertService\nfrom .infrastructure.notifications import EmailNotificationAdapter\nfrom .infrastructure.repositories import InMemoryAccountRepository\nfrom .domain.entities import Account\n\n\ndef run_demo() -&gt; None:\n    # Wire dependencies\n    accounts = InMemoryAccountRepository()\n    notifier = EmailNotificationAdapter()\n    service = BalanceAlertService(accounts, notifier)\n\n    # Seed data\n    accounts.save(Account(\n        id=\"acc-123\",\n        owner_email=\"user@example.com\",\n        balance=49.0,\n        updated_at=datetime.utcnow(),\n    ))\n\n    # Execute use-case\n    alert_sent = service.execute(account_id=\"acc-123\", threshold=50.0)\n    print(f\"Alert sent: {alert_sent}\")\n\n\nif __name__ == \"__main__\":\n    run_demo()\n</code></pre></p> <p>Output: <pre><code>\ud83d\udce7 Email -&gt; user@example.com: Your balance ($49.00) is below $50.00\nAlert sent: True\n</code></pre></p>"},{"location":"examples/ddd-bank-balance-alert/#testing","title":"Testing","text":"<pre><code>import pytest\nfrom unittest.mock import Mock\nfrom datetime import datetime\nfrom modules.banking.application.balance_alert import BalanceAlertService\nfrom modules.banking.domain.entities import Account\n\n\nclass TestBalanceAlertService:\n    def test_sends_alert_when_below_threshold(self):\n        mock_repo = Mock()\n        mock_repo.get.return_value = Account(\n            id=\"acc-1\",\n            owner_email=\"test@example.com\",\n            balance=40.0,\n            updated_at=datetime.utcnow(),\n        )\n        mock_notifier = Mock()\n\n        service = BalanceAlertService(mock_repo, mock_notifier)\n        result = service.execute(\"acc-1\", threshold=50.0)\n\n        assert result is True\n        mock_notifier.send_balance_alert.assert_called_once_with(\n            to_email=\"test@example.com\",\n            current_balance=40.0,\n            threshold=50.0,\n        )\n\n    def test_no_alert_when_above_threshold(self):\n        mock_repo = Mock()\n        mock_repo.get.return_value = Account(\n            id=\"acc-1\",\n            owner_email=\"test@example.com\",\n            balance=100.0,\n            updated_at=datetime.utcnow(),\n        )\n        mock_notifier = Mock()\n\n        service = BalanceAlertService(mock_repo, mock_notifier)\n        result = service.execute(\"acc-1\", threshold=50.0)\n\n        assert result is False\n        mock_notifier.send_balance_alert.assert_not_called()\n\n    def test_no_alert_when_account_not_found(self):\n        mock_repo = Mock()\n        mock_repo.get.return_value = None\n        mock_notifier = Mock()\n\n        service = BalanceAlertService(mock_repo, mock_notifier)\n        result = service.execute(\"nonexistent\", threshold=50.0)\n\n        assert result is False\n        mock_notifier.send_balance_alert.assert_not_called()\n</code></pre>"},{"location":"examples/ddd-bank-balance-alert/#key-takeaways","title":"Key Takeaways","text":"Aspect Implementation Multiple ports <code>AccountRepository</code> + <code>NotificationPort</code> \u2014 domain defines what it needs Single responsibility Each adapter does one thing (persist or notify) Testability Mock both ports independently Extensibility Add <code>SlackNotificationAdapter</code> without changing domain or use-case"},{"location":"examples/ddd-external-api/","title":"DDD Service \u2014 External API Calls","text":"<p>How to integrate external APIs (stock exchanges, payment gateways, third-party services) using the ports-and-adapters pattern.</p> <p>See also: Core concepts \u00b7 Usage examples \u00b7 Bank balance alert</p>"},{"location":"examples/ddd-external-api/#overview","title":"Overview","text":"<p>When fetching data from external services, apply the same hexagonal pattern:</p> Layer Responsibility Domain (<code>ports.py</code>) Define an interface describing what you need Infrastructure Implement the adapter that calls the external API Application (<code>use_cases.py</code>) Orchestrate by injecting the port"},{"location":"examples/ddd-external-api/#example-stock-exchange-historical-data","title":"Example: Stock Exchange Historical Data","text":""},{"location":"examples/ddd-external-api/#domain-layer","title":"Domain Layer","text":"<p><code>modules/market_data/domain/entities.py</code> <pre><code>from dataclasses import dataclass\nfrom datetime import date\n\n\n@dataclass\nclass OHLCV:\n    \"\"\"Open-High-Low-Close-Volume candle.\"\"\"\n    symbol: str\n    date: date\n    open: float\n    high: float\n    low: float\n    close: float\n    volume: int\n</code></pre></p> <p><code>modules/market_data/domain/ports.py</code> <pre><code>from abc import ABC, abstractmethod\nfrom datetime import date\nfrom .entities import OHLCV\n\n\nclass StockDataPort(ABC):\n    \"\"\"Port for fetching historical market data.\"\"\"\n\n    @abstractmethod\n    def get_historical_data(self, symbol: str, start: date, end: date) -&gt; list[OHLCV]:\n        \"\"\"Fetch historical OHLCV data for a symbol.\"\"\"\n</code></pre></p>"},{"location":"examples/ddd-external-api/#infrastructure-layer","title":"Infrastructure Layer","text":"<p><code>modules/market_data/infrastructure/stock_api_adapter.py</code> <pre><code>import requests\nfrom datetime import date\nfrom ..domain.entities import OHLCV\nfrom ..domain.ports import StockDataPort\n\n\nclass AlphaVantageAdapter(StockDataPort):\n    \"\"\"Adapter for Alpha Vantage stock API.\"\"\"\n\n    def __init__(self, api_key: str):\n        self._api_key = api_key\n        self._base_url = \"https://www.alphavantage.co/query\"\n\n    def get_historical_data(self, symbol: str, start: date, end: date) -&gt; list[OHLCV]:\n        params = {\n            \"function\": \"TIME_SERIES_DAILY\",\n            \"symbol\": symbol,\n            \"apikey\": self._api_key,\n            \"outputsize\": \"full\",\n        }\n        response = requests.get(self._base_url, params=params)\n        response.raise_for_status()\n        return self._parse_response(response.json(), symbol, start, end)\n\n    def _parse_response(self, data: dict, symbol: str, start: date, end: date) -&gt; list[OHLCV]:\n        time_series = data.get(\"Time Series (Daily)\", {})\n        results = []\n        for date_str, values in time_series.items():\n            d = date.fromisoformat(date_str)\n            if start &lt;= d &lt;= end:\n                results.append(OHLCV(\n                    symbol=symbol,\n                    date=d,\n                    open=float(values[\"1. open\"]),\n                    high=float(values[\"2. high\"]),\n                    low=float(values[\"3. low\"]),\n                    close=float(values[\"4. close\"]),\n                    volume=int(values[\"5. volume\"]),\n                ))\n        return sorted(results, key=lambda x: x.date)\n</code></pre></p>"},{"location":"examples/ddd-external-api/#application-layer","title":"Application Layer","text":"<p><code>modules/market_data/application/use_cases.py</code> <pre><code>from datetime import date\nfrom ..domain.ports import StockDataPort\nfrom ..domain.entities import OHLCV\n\n\nclass GetHistoricalPrices:\n    def __init__(self, stock_data: StockDataPort):\n        self._stock_data = stock_data\n\n    def execute(self, symbol: str, start: date, end: date) -&gt; list[OHLCV]:\n        return self._stock_data.get_historical_data(symbol, start, end)\n</code></pre></p>"},{"location":"examples/ddd-external-api/#wiring-it-together","title":"Wiring it together","text":"<p><code>modules/market_data/main.py</code> <pre><code>import os\nfrom datetime import date\nfrom .infrastructure.stock_api_adapter import AlphaVantageAdapter\nfrom .application.use_cases import GetHistoricalPrices\n\n\ndef run_demo():\n    api_key = os.getenv(\"ALPHA_VANTAGE_API_KEY\", \"demo\")\n\n    adapter = AlphaVantageAdapter(api_key)\n    get_prices = GetHistoricalPrices(adapter)\n\n    prices = get_prices.execute(\n        symbol=\"AAPL\",\n        start=date(2026, 1, 1),\n        end=date(2026, 1, 31),\n    )\n\n    for candle in prices:\n        print(f\"{candle.date}: O={candle.open:.2f} H={candle.high:.2f} L={candle.low:.2f} C={candle.close:.2f}\")\n\n\nif __name__ == \"__main__\":\n    run_demo()\n</code></pre></p>"},{"location":"examples/ddd-external-api/#swapping-providers","title":"Swapping providers","text":"<p>The beauty of this pattern \u2014 switch from Alpha Vantage to Yahoo Finance without touching use-cases:</p> <pre><code>class YahooFinanceAdapter(StockDataPort):\n    \"\"\"Alternative adapter using Yahoo Finance.\"\"\"\n\n    def get_historical_data(self, symbol: str, start: date, end: date) -&gt; list[OHLCV]:\n        # Different API, same interface\n        import yfinance as yf\n        ticker = yf.Ticker(symbol)\n        df = ticker.history(start=start, end=end)\n        return [\n            OHLCV(\n                symbol=symbol,\n                date=idx.date(),\n                open=row[\"Open\"],\n                high=row[\"High\"],\n                low=row[\"Low\"],\n                close=row[\"Close\"],\n                volume=int(row[\"Volume\"]),\n            )\n            for idx, row in df.iterrows()\n        ]\n</code></pre> <pre><code># Swap with zero changes to use-case\nadapter = YahooFinanceAdapter()  # instead of AlphaVantageAdapter\nget_prices = GetHistoricalPrices(adapter)\n</code></pre>"},{"location":"examples/ddd-external-api/#testing-with-mocks","title":"Testing with mocks","text":"<pre><code>import pytest\nfrom unittest.mock import Mock\nfrom datetime import date\nfrom modules.market_data.application.use_cases import GetHistoricalPrices\nfrom modules.market_data.domain.entities import OHLCV\n\n\ndef test_get_historical_prices():\n    mock_adapter = Mock()\n    mock_adapter.get_historical_data.return_value = [\n        OHLCV(\"AAPL\", date(2026, 1, 15), 150.0, 155.0, 149.0, 154.0, 1000000)\n    ]\n\n    use_case = GetHistoricalPrices(mock_adapter)\n    result = use_case.execute(\"AAPL\", date(2026, 1, 1), date(2026, 1, 31))\n\n    assert len(result) == 1\n    assert result[0].symbol == \"AAPL\"\n    mock_adapter.get_historical_data.assert_called_once_with(\n        \"AAPL\", date(2026, 1, 1), date(2026, 1, 31)\n    )\n</code></pre>"},{"location":"examples/ddd-external-api/#benefits","title":"Benefits","text":"Benefit Description Isolation Domain stays pure and testable (no HTTP dependencies) Swappability Easy to switch providers (Alpha Vantage \u2192 Yahoo Finance \u2192 Bloomberg) Testability Mock the port in tests without hitting real APIs Resilience Add retries, caching, circuit breakers in the adapter without touching domain"},{"location":"examples/ddd-usage-examples/","title":"DDD Service \u2014 Usage Examples","text":"<p>Basic examples demonstrating the DDD hexagonal architecture in practice.</p> <p>See also: Core concepts \u00b7 External API calls \u00b7 Bank balance alert</p>"},{"location":"examples/ddd-usage-examples/#minimal-end-to-end-demo-in-memory","title":"Minimal end-to-end demo (in-memory)","text":"<p>A quick example wiring all layers together:</p> <pre><code>from modules.example_feature.infrastructure.repositories import InMemoryNoteRepository\nfrom modules.example_feature.application.use_cases import CreateNote, ListNotes\n\nrepo = InMemoryNoteRepository()\ncreate_note = CreateNote(repo)\nlist_notes = ListNotes(repo)\n\ncreate_note.execute(\"First note\")\nprint(list_notes.execute())\n</code></pre>"},{"location":"examples/ddd-usage-examples/#wiring-with-fastapi","title":"Wiring with FastAPI","text":"<p>Example composition and HTTP handler:</p> <pre><code># composition.py\nfrom modules.example_feature.infrastructure.repositories import InMemoryNoteRepository\nfrom modules.example_feature.application.use_cases import CreateNote, ListNotes\n\nrepo = InMemoryNoteRepository()\ncreate_note = CreateNote(repo)\nlist_notes = ListNotes(repo)\n</code></pre> <pre><code># api/notes.py\nfrom fastapi import APIRouter\nfrom pydantic import BaseModel\nfrom .composition import create_note, list_notes\n\nrouter = APIRouter(prefix=\"/notes\", tags=[\"notes\"])\n\n\nclass CreateNotePayload(BaseModel):\n    title: str\n\n\n@router.post(\"/\")\ndef create_note_endpoint(payload: CreateNotePayload):\n    note = create_note.execute(title=payload.title)\n    return {\n        \"id\": note.id,\n        \"title\": note.title,\n        \"created_at\": note.created_at.isoformat(),\n    }\n\n\n@router.get(\"/\")\ndef list_notes_endpoint():\n    return [\n        {\"id\": n.id, \"title\": n.title, \"created_at\": n.created_at.isoformat()}\n        for n in list_notes.execute()\n    ]\n</code></pre>"},{"location":"examples/ddd-usage-examples/#swapping-implementations","title":"Swapping implementations","text":"<p>The power of ports-and-adapters: swap the repository without touching use-cases.</p> <pre><code># For tests \u2014 use in-memory\nfrom modules.example_feature.infrastructure.repositories import InMemoryNoteRepository\nrepo = InMemoryNoteRepository()\n\n# For production \u2014 use PostgreSQL (same interface)\nfrom modules.example_feature.infrastructure.postgres_repository import PostgresNoteRepository\nrepo = PostgresNoteRepository(connection_string=\"postgresql://...\")\n\n# Use-case stays the same\ncreate_note = CreateNote(repo)\n</code></pre>"},{"location":"examples/ddd-usage-examples/#testing-with-mocks","title":"Testing with mocks","text":"<pre><code>import pytest\nfrom unittest.mock import Mock\nfrom modules.example_feature.application.use_cases import CreateNote\nfrom modules.example_feature.domain.ports import NoteRepository\n\n\ndef test_create_note():\n    mock_repo = Mock(spec=NoteRepository)\n    mock_repo.add.return_value = Mock(id=\"123\", title=\"Test\", created_at=\"2026-01-01\")\n\n    use_case = CreateNote(mock_repo)\n    result = use_case.execute(\"Test\")\n\n    mock_repo.add.assert_called_once()\n    assert result.id == \"123\"\n</code></pre>"}]}